### Redis读写分离

为什么要用redis读写分离？

单机情况下redis能承受大约2万的QPS（具体数据因机器配置与业务场景而异），如果想要承接更高数值的QPS（10万以上），则需要用到读写分离的redis集群。



#### redis 不能支撑高并发的瓶颈在哪里？

就是 **单机**

单机 redis 一般情况下能够承载的 QPS 上万到几万不等，根据你的业务操作的复杂性， redis 提供很多复杂的操作，如 lua 脚本等复杂的操作，那么可能会更低。 比如就简单的 kv 查询来说还是比较容易达到上万的。

假设有上千万、上亿的用户来访问，直接就能把你的单机 redis 干死

#### 如果-redis-要支撑超过-10万-的并发，那应该怎么做？)如果 redis 要支撑超过 10万+ 的并发，那应该怎么做？

单机的 redis 几乎不太可能 QPS 超过 10万+，除非一些特殊情况，比如你的机器性能特别好，配置特别高，真实物理机，维护做的特别好，而且你的整体的操作不是太复杂

单机在一般就几万。要提高并发，一般的方案是 **读写分离**，一般来说，对缓存，一般都是用来支撑读高并发的，写的请求是比较少的，可能写请求也就一秒钟几千，一两千，大量的请求都是读，一秒钟二十万次读



一主多从，主负责写，并且将数据同步复制到其他 slave 节点，从节点负责读，还可水平扩展 slave 节点以支撑更多的 QPS

主从架构 -> 读写分离 -> 支撑 10万+ 读 QPS 的架构

参考：

https://juejin.im/post/5d08b1f8f265da1b7b318cff
#Java内存区域
**维基百科**  
> Java虚拟机（英语：Java Virtual Machine，缩写为JVM），一种能够运行Java bytecode的虚拟机，以堆栈结构机器来进行实做。最早由SUN微系统所研发并实现第一个实现版本，是Java平台的一部分，能够运行以Java语言写作的软件程序。

> Java虚拟机有自己完善的硬体架构，如处理器、堆栈、寄存器等，还具有相应的指令系统。JVM屏蔽了与具体操作系统平台相关的信息，使得Java程序只需生成在Java虚拟机上运行的目标代码（字节码），就可以在多种平台上不加修改地运行。通过对中央处理器（CPU）所执行的软件实现，实现能执行编译过的Java程序码（Applet与应用程序）。

> 作为一种编程语言的虚拟机，实际上不只是专用于Java语言，只要生成的编译文件符合JVM对加载编译文件格式要求，任何语言都可以由JVM编译运行。此外，除了甲骨文，也有其他开源或闭源的实现。  


从[编码](https://book.douban.com/subject/4822685/)一书中，我们可以很清楚的感知到人类的信息可以通过计算机存储和处理，而且由于计算机速度的飞速发展，这一优势也显示的淋漓尽致。
现代计算机的模型就不得不说道冯·诺伊曼结构。

**维基百科** 
> 冯·诺伊曼结构（英语：Von Neumann architecture），也称冯·诺伊曼模型（Von Neumann model）或普林斯顿结构（Princeton architecture），**是一种将程序指令存储器和数据存储器合并在一起的计算机设计概念结构**。本词描述的是一种实现通用图灵机的计算设备，以及一种相对于并行计算的序列式结构参考模型（referential model）。

> 本结构隐约指导了将存储设备与中央处理器分开的概念，因此依本结构设计出的计算机又称存储程序计算机。

从中我们可以看出指令和数据都是存储在存储器中（也就是我们说的内存），而JVM也是符合冯·诺伊曼结构。  
JVM在执行Java程序的过程中会把它所管理的内存划分为若干个不同的数据区域。区域都有各自的用途，以及创建和销毁的时间，有的区域随着虚拟机进程的启动而存在，有的则依赖用户线程的启动和结束而建立和销毁。  

![Java虚拟机运行时数据区](http://images2017.cnblogs.com/blog/632650/201709/632650-20170920231114712-718663561.png)

***什么是线程：CPU执行时间加上指令加上内存（自己的理解）***
  
**程序计数器**  
线程私有的，主要作用是为了线程切换后能恢复到正确的位置，记录的是正在执行的虚拟机字节码指令的地址  
**Java虚拟机栈**  
线程私有的，主要作用是为了记录指令的执行信息，在入栈的时候会创建一个栈帧，里面用来记录局部变量表 操作数栈 动态链接 方法出口等信息。  
**本地方法栈**   
线程私有的，主要作用跟Java虚拟机栈非常相似，Java虚拟机栈是为了Java字节码服务的，而本地方法栈是为了原生方法服务的，也就是Native方法，说白了就是当前实现JVM语言（一般是c++)  
**Java堆**  
线程共享的，主要作用是为了存放对象实例，个人理解也就是冯·诺伊曼结构中数据的部分  
**方法区**  
线程共享的，主要作用是为了存储已被虚拟机加载的类信息 常量 静态变量 代码等数据（Java1.7），个人理解也就是冯·诺伊曼结构中指令的部分 

机器的内存是有上限的，所以需要有个机制来清理内存。  
**Java虚拟机栈** **本地方法栈** **程序计数器**随着线程而生，随线程而灭；栈中的栈帧随着方法的进入和退出而有条不紊地执行出栈入栈操作。每一个栈帧中分配多少内存基本上是在类结构确定下来就是已知的，因此这三个区域的内存分配和回收都具有确定性，在这几个区域就不需要过多考虑回收的问题。我们所需要管理的就剩下**Java堆**和**方法区**，我们给这个机制命名为垃圾收集。



